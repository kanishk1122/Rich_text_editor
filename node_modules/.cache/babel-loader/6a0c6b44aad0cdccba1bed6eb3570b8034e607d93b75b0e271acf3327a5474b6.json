{"ast":null,"code":"/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';\nimport { useLexicalNodeSelection } from '@lexical/react/useLexicalNodeSelection';\nimport { addClassNamesToElement, mergeRegister, removeClassNamesFromElement } from '@lexical/utils';\nimport { createCommand, DecoratorNode, $applyNodeReplacement, $getSelection, $isNodeSelection, CLICK_COMMAND, COMMAND_PRIORITY_LOW, KEY_DELETE_COMMAND, KEY_BACKSPACE_COMMAND } from 'lexical';\nimport { useCallback, useEffect } from 'react';\nimport { jsx } from 'react/jsx-runtime';\n\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nconst INSERT_HORIZONTAL_RULE_COMMAND = createCommand('INSERT_HORIZONTAL_RULE_COMMAND');\nfunction HorizontalRuleComponent(_ref) {\n  let {\n    nodeKey\n  } = _ref;\n  const [editor] = useLexicalComposerContext();\n  const [isSelected, setSelected, clearSelection] = useLexicalNodeSelection(nodeKey);\n  const $onDelete = useCallback(event => {\n    const deleteSelection = $getSelection();\n    if (isSelected && $isNodeSelection(deleteSelection)) {\n      event.preventDefault();\n      editor.update(() => {\n        deleteSelection.getNodes().forEach(node => {\n          if ($isHorizontalRuleNode(node)) {\n            node.remove();\n          }\n        });\n      });\n    }\n    return false;\n  }, [editor, isSelected]);\n  useEffect(() => {\n    return mergeRegister(editor.registerCommand(CLICK_COMMAND, event => {\n      const hrElem = editor.getElementByKey(nodeKey);\n      if (event.target === hrElem) {\n        if (!event.shiftKey) {\n          clearSelection();\n        }\n        setSelected(!isSelected);\n        return true;\n      }\n      return false;\n    }, COMMAND_PRIORITY_LOW), editor.registerCommand(KEY_DELETE_COMMAND, $onDelete, COMMAND_PRIORITY_LOW), editor.registerCommand(KEY_BACKSPACE_COMMAND, $onDelete, COMMAND_PRIORITY_LOW));\n  }, [clearSelection, editor, isSelected, nodeKey, $onDelete, setSelected]);\n  useEffect(() => {\n    const hrElem = editor.getElementByKey(nodeKey);\n    const isSelectedClassName = 'selected';\n    if (hrElem !== null) {\n      if (isSelected) {\n        addClassNamesToElement(hrElem, isSelectedClassName);\n      } else {\n        removeClassNamesFromElement(hrElem, isSelectedClassName);\n      }\n    }\n  }, [editor, isSelected, nodeKey]);\n  return null;\n}\nclass HorizontalRuleNode extends DecoratorNode {\n  static getType() {\n    return 'horizontalrule';\n  }\n  static clone(node) {\n    return new HorizontalRuleNode(node.__key);\n  }\n  static importJSON(serializedNode) {\n    return $createHorizontalRuleNode();\n  }\n  static importDOM() {\n    return {\n      hr: () => ({\n        conversion: $convertHorizontalRuleElement,\n        priority: 0\n      })\n    };\n  }\n  exportJSON() {\n    return {\n      type: 'horizontalrule',\n      version: 1\n    };\n  }\n  exportDOM() {\n    return {\n      element: document.createElement('hr')\n    };\n  }\n  createDOM(config) {\n    const element = document.createElement('hr');\n    addClassNamesToElement(element, config.theme.hr);\n    return element;\n  }\n  getTextContent() {\n    return '\\n';\n  }\n  isInline() {\n    return false;\n  }\n  updateDOM() {\n    return false;\n  }\n  decorate() {\n    return /*#__PURE__*/jsx(HorizontalRuleComponent, {\n      nodeKey: this.__key\n    });\n  }\n}\nfunction $convertHorizontalRuleElement() {\n  return {\n    node: $createHorizontalRuleNode()\n  };\n}\nfunction $createHorizontalRuleNode() {\n  return $applyNodeReplacement(new HorizontalRuleNode());\n}\nfunction $isHorizontalRuleNode(node) {\n  return node instanceof HorizontalRuleNode;\n}\nexport { $createHorizontalRuleNode, $isHorizontalRuleNode, HorizontalRuleNode, INSERT_HORIZONTAL_RULE_COMMAND };","map":{"version":3,"names":["useLexicalComposerContext","useLexicalNodeSelection","addClassNamesToElement","mergeRegister","removeClassNamesFromElement","createCommand","DecoratorNode","$applyNodeReplacement","$getSelection","$isNodeSelection","CLICK_COMMAND","COMMAND_PRIORITY_LOW","KEY_DELETE_COMMAND","KEY_BACKSPACE_COMMAND","useCallback","useEffect","jsx","INSERT_HORIZONTAL_RULE_COMMAND","HorizontalRuleComponent","_ref","nodeKey","editor","isSelected","setSelected","clearSelection","$onDelete","event","deleteSelection","preventDefault","update","getNodes","forEach","node","$isHorizontalRuleNode","remove","registerCommand","hrElem","getElementByKey","target","shiftKey","isSelectedClassName","HorizontalRuleNode","getType","clone","__key","importJSON","serializedNode","$createHorizontalRuleNode","importDOM","hr","conversion","$convertHorizontalRuleElement","priority","exportJSON","type","version","exportDOM","element","document","createElement","createDOM","config","theme","getTextContent","isInline","updateDOM","decorate"],"sources":["/media/ks/My thing/test/textditor/node_modules/@lexical/react/LexicalHorizontalRuleNode.dev.mjs"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';\nimport { useLexicalNodeSelection } from '@lexical/react/useLexicalNodeSelection';\nimport { addClassNamesToElement, mergeRegister, removeClassNamesFromElement } from '@lexical/utils';\nimport { createCommand, DecoratorNode, $applyNodeReplacement, $getSelection, $isNodeSelection, CLICK_COMMAND, COMMAND_PRIORITY_LOW, KEY_DELETE_COMMAND, KEY_BACKSPACE_COMMAND } from 'lexical';\nimport { useCallback, useEffect } from 'react';\nimport { jsx } from 'react/jsx-runtime';\n\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nconst INSERT_HORIZONTAL_RULE_COMMAND = createCommand('INSERT_HORIZONTAL_RULE_COMMAND');\nfunction HorizontalRuleComponent({\n  nodeKey\n}) {\n  const [editor] = useLexicalComposerContext();\n  const [isSelected, setSelected, clearSelection] = useLexicalNodeSelection(nodeKey);\n  const $onDelete = useCallback(event => {\n    const deleteSelection = $getSelection();\n    if (isSelected && $isNodeSelection(deleteSelection)) {\n      event.preventDefault();\n      editor.update(() => {\n        deleteSelection.getNodes().forEach(node => {\n          if ($isHorizontalRuleNode(node)) {\n            node.remove();\n          }\n        });\n      });\n    }\n    return false;\n  }, [editor, isSelected]);\n  useEffect(() => {\n    return mergeRegister(editor.registerCommand(CLICK_COMMAND, event => {\n      const hrElem = editor.getElementByKey(nodeKey);\n      if (event.target === hrElem) {\n        if (!event.shiftKey) {\n          clearSelection();\n        }\n        setSelected(!isSelected);\n        return true;\n      }\n      return false;\n    }, COMMAND_PRIORITY_LOW), editor.registerCommand(KEY_DELETE_COMMAND, $onDelete, COMMAND_PRIORITY_LOW), editor.registerCommand(KEY_BACKSPACE_COMMAND, $onDelete, COMMAND_PRIORITY_LOW));\n  }, [clearSelection, editor, isSelected, nodeKey, $onDelete, setSelected]);\n  useEffect(() => {\n    const hrElem = editor.getElementByKey(nodeKey);\n    const isSelectedClassName = 'selected';\n    if (hrElem !== null) {\n      if (isSelected) {\n        addClassNamesToElement(hrElem, isSelectedClassName);\n      } else {\n        removeClassNamesFromElement(hrElem, isSelectedClassName);\n      }\n    }\n  }, [editor, isSelected, nodeKey]);\n  return null;\n}\nclass HorizontalRuleNode extends DecoratorNode {\n  static getType() {\n    return 'horizontalrule';\n  }\n  static clone(node) {\n    return new HorizontalRuleNode(node.__key);\n  }\n  static importJSON(serializedNode) {\n    return $createHorizontalRuleNode();\n  }\n  static importDOM() {\n    return {\n      hr: () => ({\n        conversion: $convertHorizontalRuleElement,\n        priority: 0\n      })\n    };\n  }\n  exportJSON() {\n    return {\n      type: 'horizontalrule',\n      version: 1\n    };\n  }\n  exportDOM() {\n    return {\n      element: document.createElement('hr')\n    };\n  }\n  createDOM(config) {\n    const element = document.createElement('hr');\n    addClassNamesToElement(element, config.theme.hr);\n    return element;\n  }\n  getTextContent() {\n    return '\\n';\n  }\n  isInline() {\n    return false;\n  }\n  updateDOM() {\n    return false;\n  }\n  decorate() {\n    return /*#__PURE__*/jsx(HorizontalRuleComponent, {\n      nodeKey: this.__key\n    });\n  }\n}\nfunction $convertHorizontalRuleElement() {\n  return {\n    node: $createHorizontalRuleNode()\n  };\n}\nfunction $createHorizontalRuleNode() {\n  return $applyNodeReplacement(new HorizontalRuleNode());\n}\nfunction $isHorizontalRuleNode(node) {\n  return node instanceof HorizontalRuleNode;\n}\n\nexport { $createHorizontalRuleNode, $isHorizontalRuleNode, HorizontalRuleNode, INSERT_HORIZONTAL_RULE_COMMAND };\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,yBAAyB,QAAQ,uCAAuC;AACjF,SAASC,uBAAuB,QAAQ,wCAAwC;AAChF,SAASC,sBAAsB,EAAEC,aAAa,EAAEC,2BAA2B,QAAQ,gBAAgB;AACnG,SAASC,aAAa,EAAEC,aAAa,EAAEC,qBAAqB,EAAEC,aAAa,EAAEC,gBAAgB,EAAEC,aAAa,EAAEC,oBAAoB,EAAEC,kBAAkB,EAAEC,qBAAqB,QAAQ,SAAS;AAC9L,SAASC,WAAW,EAAEC,SAAS,QAAQ,OAAO;AAC9C,SAASC,GAAG,QAAQ,mBAAmB;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMC,8BAA8B,GAAGZ,aAAa,CAAC,gCAAgC,CAAC;AACtF,SAASa,uBAAuBA,CAAAC,IAAA,EAE7B;EAAA,IAF8B;IAC/BC;EACF,CAAC,GAAAD,IAAA;EACC,MAAM,CAACE,MAAM,CAAC,GAAGrB,yBAAyB,CAAC,CAAC;EAC5C,MAAM,CAACsB,UAAU,EAAEC,WAAW,EAAEC,cAAc,CAAC,GAAGvB,uBAAuB,CAACmB,OAAO,CAAC;EAClF,MAAMK,SAAS,GAAGX,WAAW,CAACY,KAAK,IAAI;IACrC,MAAMC,eAAe,GAAGnB,aAAa,CAAC,CAAC;IACvC,IAAIc,UAAU,IAAIb,gBAAgB,CAACkB,eAAe,CAAC,EAAE;MACnDD,KAAK,CAACE,cAAc,CAAC,CAAC;MACtBP,MAAM,CAACQ,MAAM,CAAC,MAAM;QAClBF,eAAe,CAACG,QAAQ,CAAC,CAAC,CAACC,OAAO,CAACC,IAAI,IAAI;UACzC,IAAIC,qBAAqB,CAACD,IAAI,CAAC,EAAE;YAC/BA,IAAI,CAACE,MAAM,CAAC,CAAC;UACf;QACF,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ;IACA,OAAO,KAAK;EACd,CAAC,EAAE,CAACb,MAAM,EAAEC,UAAU,CAAC,CAAC;EACxBP,SAAS,CAAC,MAAM;IACd,OAAOZ,aAAa,CAACkB,MAAM,CAACc,eAAe,CAACzB,aAAa,EAAEgB,KAAK,IAAI;MAClE,MAAMU,MAAM,GAAGf,MAAM,CAACgB,eAAe,CAACjB,OAAO,CAAC;MAC9C,IAAIM,KAAK,CAACY,MAAM,KAAKF,MAAM,EAAE;QAC3B,IAAI,CAACV,KAAK,CAACa,QAAQ,EAAE;UACnBf,cAAc,CAAC,CAAC;QAClB;QACAD,WAAW,CAAC,CAACD,UAAU,CAAC;QACxB,OAAO,IAAI;MACb;MACA,OAAO,KAAK;IACd,CAAC,EAAEX,oBAAoB,CAAC,EAAEU,MAAM,CAACc,eAAe,CAACvB,kBAAkB,EAAEa,SAAS,EAAEd,oBAAoB,CAAC,EAAEU,MAAM,CAACc,eAAe,CAACtB,qBAAqB,EAAEY,SAAS,EAAEd,oBAAoB,CAAC,CAAC;EACxL,CAAC,EAAE,CAACa,cAAc,EAAEH,MAAM,EAAEC,UAAU,EAAEF,OAAO,EAAEK,SAAS,EAAEF,WAAW,CAAC,CAAC;EACzER,SAAS,CAAC,MAAM;IACd,MAAMqB,MAAM,GAAGf,MAAM,CAACgB,eAAe,CAACjB,OAAO,CAAC;IAC9C,MAAMoB,mBAAmB,GAAG,UAAU;IACtC,IAAIJ,MAAM,KAAK,IAAI,EAAE;MACnB,IAAId,UAAU,EAAE;QACdpB,sBAAsB,CAACkC,MAAM,EAAEI,mBAAmB,CAAC;MACrD,CAAC,MAAM;QACLpC,2BAA2B,CAACgC,MAAM,EAAEI,mBAAmB,CAAC;MAC1D;IACF;EACF,CAAC,EAAE,CAACnB,MAAM,EAAEC,UAAU,EAAEF,OAAO,CAAC,CAAC;EACjC,OAAO,IAAI;AACb;AACA,MAAMqB,kBAAkB,SAASnC,aAAa,CAAC;EAC7C,OAAOoC,OAAOA,CAAA,EAAG;IACf,OAAO,gBAAgB;EACzB;EACA,OAAOC,KAAKA,CAACX,IAAI,EAAE;IACjB,OAAO,IAAIS,kBAAkB,CAACT,IAAI,CAACY,KAAK,CAAC;EAC3C;EACA,OAAOC,UAAUA,CAACC,cAAc,EAAE;IAChC,OAAOC,yBAAyB,CAAC,CAAC;EACpC;EACA,OAAOC,SAASA,CAAA,EAAG;IACjB,OAAO;MACLC,EAAE,EAAEA,CAAA,MAAO;QACTC,UAAU,EAAEC,6BAA6B;QACzCC,QAAQ,EAAE;MACZ,CAAC;IACH,CAAC;EACH;EACAC,UAAUA,CAAA,EAAG;IACX,OAAO;MACLC,IAAI,EAAE,gBAAgB;MACtBC,OAAO,EAAE;IACX,CAAC;EACH;EACAC,SAASA,CAAA,EAAG;IACV,OAAO;MACLC,OAAO,EAAEC,QAAQ,CAACC,aAAa,CAAC,IAAI;IACtC,CAAC;EACH;EACAC,SAASA,CAACC,MAAM,EAAE;IAChB,MAAMJ,OAAO,GAAGC,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC;IAC5CzD,sBAAsB,CAACuD,OAAO,EAAEI,MAAM,CAACC,KAAK,CAACb,EAAE,CAAC;IAChD,OAAOQ,OAAO;EAChB;EACAM,cAAcA,CAAA,EAAG;IACf,OAAO,IAAI;EACb;EACAC,QAAQA,CAAA,EAAG;IACT,OAAO,KAAK;EACd;EACAC,SAASA,CAAA,EAAG;IACV,OAAO,KAAK;EACd;EACAC,QAAQA,CAAA,EAAG;IACT,OAAO,aAAalD,GAAG,CAACE,uBAAuB,EAAE;MAC/CE,OAAO,EAAE,IAAI,CAACwB;IAChB,CAAC,CAAC;EACJ;AACF;AACA,SAASO,6BAA6BA,CAAA,EAAG;EACvC,OAAO;IACLnB,IAAI,EAAEe,yBAAyB,CAAC;EAClC,CAAC;AACH;AACA,SAASA,yBAAyBA,CAAA,EAAG;EACnC,OAAOxC,qBAAqB,CAAC,IAAIkC,kBAAkB,CAAC,CAAC,CAAC;AACxD;AACA,SAASR,qBAAqBA,CAACD,IAAI,EAAE;EACnC,OAAOA,IAAI,YAAYS,kBAAkB;AAC3C;AAEA,SAASM,yBAAyB,EAAEd,qBAAqB,EAAEQ,kBAAkB,EAAExB,8BAA8B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}